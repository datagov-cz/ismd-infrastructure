# ==============================================
# ISMD Validator - Local Development Override
# ==============================================
# This file configures Docker Compose to use locally built images instead of
# pulling from the container registry. Use this for active development when
# you need to test local changes.
#
# Prerequisites:
# - Node.js and npm installed for frontend development
# - Java and Maven for backend development
# - Docker and docker-compose installed
#
# Quick Start:
# 1. Build the frontend and backend Docker images:
#    # Backend (run from backend parent directory):
#    cd c:\Work\DIA\backend
#    docker build -f ismd-backend-validator/Dockerfile -t ismd-validator-backend-local --target validator-runtime .
#
#    # Frontend (run from frontend directory):
#    cd c:\Work\DIA\frontend
#    docker build -t ismd-validator-frontend-local .
#
# 2. Start the application stack with local images:
#    docker compose -f docker-compose.yml \
#                  -f docker-compose.dev.yml \
#                  -f docker-compose.local.yml up
#
# Development Workflow:
# - The frontend runs in development mode with hot-reload enabled
# - The backend runs with the 'localhost' Spring profile
# - Frontend is accessible at http://localhost:3000
# - Backend API is available at http://localhost:8080
#
# Note: This configuration is for local development only.
#       For production, use the Terraform deployment.
# ==============================================

services:
  ismd-validator-backend:
    image: ismd-validator-backend-local
    pull_policy: never
    environment:
      - CORS_ALLOWED_ORIGINS=http://localhost:3000
    
  ismd-validator-frontend:
    image: ismd-validator-frontend-local
    pull_policy: never
    environment:
      - NEXT_PUBLIC_BE_URL=localhost:8080
      - NODE_ENV=development
    depends_on:
      - ismd-validator-backend
